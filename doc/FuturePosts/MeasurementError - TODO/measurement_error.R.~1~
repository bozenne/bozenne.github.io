set.seed(10)
n <- 1000
X <- rnorm(n)
Y <- 2*X + rnorm(n, sd = 0.25)
W <- X + rnorm(n, sd = 0.5)
lm(Y ~ X)
lm(Y ~ W)

m1 <- lvm(Y ~ eta)
regression(m1) <- eta ~ W
latent(m1) <- ~eta
estimate(m1, data.frame(Y = Y, W = W), control = list(constrain = TRUE))

X1 <- rnorm(n)
X2 <- rnorm(n)
X3 <- rnorm(n)
X4 <- rnorm(n)
YY <- 1*X1 + 2*X2 + 3*X3 + 4*X4 + rnorm(n, sd = 0.25)
noise <- rnorm(n, sd = 0.5)
W1 <- X1 + noise
W2 <- X2 + noise
W3 <- X3 + noise
W4 <- X4 + noise

lm(YY ~ X1 + X2 + X3 + X4)
lm(YY ~ W1 + W2 + W3 + W4)

mm <- lvm(YY ~ eta)
regression(m1) <- eta ~ W1 + W2 + W3 + W4
latent(m1) <- ~eta
estimate(m1, data.frame(Y = Y, W = W), control = list(constrain = TRUE))
